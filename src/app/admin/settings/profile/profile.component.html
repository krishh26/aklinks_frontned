<div class="dashboard-container" [class.sidebar-closed]="!isSidebarOpen">
  <!-- Shared Sidebar -->
  <app-sidebar [isOpen]="isSidebarOpen" (sidebarToggle)="toggleSidebar()"></app-sidebar>

  <!-- Mobile Sidebar Overlay -->
  <div class="sidebar-overlay" *ngIf="isSidebarOpen" (click)="closeSidebar()"></div>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Admin Header -->
    <app-admin-header [isSidebarOpen]="isSidebarOpen" (sidebarToggle)="toggleSidebar()"></app-admin-header>

    <!-- Top Bar -->
    <header class="top-bar">
      <div class="top-bar-left">
        <h1 class="page-title">Profile</h1>
        <p class="page-subtitle">Manage your account information and preferences.</p>
      </div>
    </header>

    <!-- Profile Content -->
    <div class="dashboard-content">
      <div class="profile-container">
        <form (ngSubmit)="onSubmit()" class="profile-form">
          <!-- Left Column - Profile Information -->
          <div class="profile-column left-column">
            <div class="profile-form-wrapper">
              <h2 class="column-title">Profile Information</h2>
              
              <!-- Profile Picture Section -->
              <div class="profile-picture-section">
                <div class="profile-avatar-wrapper">
                  <div class="profile-avatar">
                    <img *ngIf="profileImageUrl" [src]="profileImageUrl" alt="Profile Picture" class="avatar-image">
                    <span *ngIf="!profileImageUrl" class="avatar-placeholder">ðŸ˜Š</span>
                  </div>
                  <label for="profileImage" class="upload-btn">
                    <input 
                      type="file" 
                      id="profileImage" 
                      accept="image/*" 
                      (change)="onFileSelected($event)"
                      style="display: none;"
                    />
                    <span>Change Photo</span>
                  </label>
                </div>
              </div>

              <!-- Form Fields -->
              <div class="form-group">
                <label for="username">Username *</label>
                <input 
                  type="text" 
                  id="username" 
                  name="username" 
                  [(ngModel)]="profileForm.username"
                  class="form-input"
                  required
                  placeholder="Enter your username"
                />
              </div>

              <div class="form-group">
                <label for="email">Email Address *</label>
                <input 
                  type="email" 
                  id="email" 
                  name="email" 
                  [(ngModel)]="profileForm.email"
                  class="form-input"
                  required
                  placeholder="Enter your email"
                />
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="firstName">First Name</label>
                  <input 
                    type="text" 
                    id="firstName" 
                    name="firstName" 
                    [(ngModel)]="profileForm.firstName"
                    class="form-input"
                    placeholder="Enter your first name"
                  />
                </div>

                <div class="form-group">
                  <label for="lastName">Last Name</label>
                  <input 
                    type="text" 
                    id="lastName" 
                    name="lastName" 
                    [(ngModel)]="profileForm.lastName"
                    class="form-input"
                    placeholder="Enter your last name"
                  />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="phone">Phone Number</label>
                  <input 
                    type="tel" 
                    id="phone" 
                    name="phone" 
                    [(ngModel)]="profileForm.phone"
                    class="form-input"
                    placeholder="Enter your phone number"
                  />
                </div>

                <div class="form-group">
                  <label for="location">Location</label>
                  <input 
                    type="text" 
                    id="location" 
                    name="location" 
                    [(ngModel)]="profileForm.location"
                    class="form-input"
                    placeholder="Enter your location"
                  />
                </div>
              </div>

              <div class="form-group">
                <label for="website">Website</label>
                <input 
                  type="url" 
                  id="website" 
                  name="website" 
                  [(ngModel)]="profileForm.website"
                  class="form-input"
                  placeholder="https://example.com"
                />
              </div>

              <div class="form-group">
                <label for="bio">Bio</label>
                <textarea 
                  id="bio" 
                  name="bio" 
                  [(ngModel)]="profileForm.bio"
                  class="form-textarea"
                  rows="4"
                  placeholder="Tell us about yourself..."
                ></textarea>
              </div>
            </div>
          </div>

          <!-- Right Column - Withdrawal Methods -->
          <div class="profile-column right-column">
            <div class="profile-form-wrapper">
              <h2 class="column-title">Withdrawal Methods</h2>
              <p class="section-description">Select your preferred withdrawal method and provide account details.</p>
              
              <div class="withdrawal-methods-table-wrapper">
                <table class="withdrawal-methods-table">
                  <thead>
                    <tr>
                      <th>Withdraw Method</th>
                      <th>Minimum Withdrawal Amount</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let method of withdrawalMethods">
                      <td>{{ method.method }}</td>
                      <td>{{ formatCurrency(method.minAmountUSD) }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div class="form-group">
                <label for="withdrawalMethod">Preferred Withdrawal Method *</label>
                <select 
                  id="withdrawalMethod" 
                  name="withdrawalMethod" 
                  [(ngModel)]="selectedWithdrawalMethod"
                  class="form-select"
                  required
                >
                  <option value="">Select a withdrawal method</option>
                  <option *ngFor="let method of withdrawalMethods" [value]="method.method">
                    {{ method.method }}
                  </option>
                </select>
              </div>

              <div class="form-group">
                <label for="withdrawalAccountDetails">Account Details *</label>
                <input 
                  type="text" 
                  id="withdrawalAccountDetails" 
                  name="withdrawalAccountDetails" 
                  [(ngModel)]="withdrawalAccountDetails"
                  class="form-input"
                  [required]="selectedWithdrawalMethod !== ''"
                  [placeholder]="getAccountPlaceholder()"
                />
                <small class="form-hint">Enter your account ID, email, phone number, or wallet address based on the selected method.</small>
              </div>
            </div>
          </div>

          <!-- Form Actions - Full Width -->
          <div class="form-actions-wrapper">
            <div class="form-actions">
              <button type="submit" class="submit-button">Update Profile</button>
              <button type="button" class="cancel-button" (click)="onCancel()">Cancel</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </main>
</div>

