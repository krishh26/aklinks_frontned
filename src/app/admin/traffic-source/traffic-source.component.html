<div class="dashboard-container" [class.sidebar-closed]="!isSidebarOpen" [class]="currentTheme + '-theme'">
  <!-- Shared Sidebar -->
  <app-sidebar [isOpen]="isSidebarOpen" (sidebarToggle)="toggleSidebar()"></app-sidebar>

  <!-- Mobile Sidebar Overlay -->
  <div class="sidebar-overlay" *ngIf="isSidebarOpen" (click)="closeSidebar()"></div>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Admin Header -->
    <header class="admin-header">
      <div class="header-left">
        <button class="sidebar-toggle-header-btn" *ngIf="!isSidebarOpen" (click)="toggleSidebar()" title="Open Sidebar">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </button>
        <button class="shorten-link-btn">
          Shorten Link
          <span class="plus-icon">+</span>
        </button>
      </div>
      
      <div class="header-right">
        <div class="theme-switcher-wrapper">
          <button class="header-icon theme-toggle" (click)="toggleThemeDropdown()">
            <span>{{ getThemeIcon() }}</span>
          </button>
          <div class="theme-dropdown" [class.active]="isThemeDropdownOpen">
            <button 
              class="theme-option" 
              [class.active]="currentTheme === 'light'"
              (click)="selectTheme('light')">
              <span class="theme-icon">‚òÄÔ∏è</span>
              <span class="theme-label">Light</span>
            </button>
            <button 
              class="theme-option" 
              [class.active]="currentTheme === 'dark'"
              (click)="selectTheme('dark')">
              <span class="theme-icon">üåô</span>
              <span class="theme-label">Dark</span>
            </button>
            <button 
              class="theme-option" 
              [class.active]="currentTheme === 'blue'"
              (click)="selectTheme('blue')">
              <span class="theme-icon">üåä</span>
              <span class="theme-label">Blue</span>
            </button>
          </div>
        </div>
        <button class="header-icon notifications">
          <span>üîî</span>
          <span class="notification-badge">3</span>
        </button>
        <button class="header-icon profile">
          <span>üë§</span>
        </button>
      </div>
    </header>

    <!-- Traffic Source Content -->
    <section class="traffic-source">
      <!-- Breadcrumbs -->
      <nav class="breadcrumbs">
        <a routerLink="/admin/dashboard" class="breadcrumb-link">Home</a>
        <span class="breadcrumb-separator">></span>
        <span class="breadcrumb-current">Traffic Source</span>
      </nav>

      <!-- Page Title -->
      <h1 class="page-title">Traffic Source</h1>

      <!-- Add Source Button -->
      <button class="add-source-btn" (click)="toggleAddSourceForm()">
        <span class="plus-icon" [class.rotated]="isAddSourceFormOpen">+</span>
        Add Source
      </button>

      <!-- Add Source Form (Inline) -->
      <div class="add-source-form-container" *ngIf="isAddSourceFormOpen">
        <div class="form-card">
          <form (ngSubmit)="onSubmit()" #addSourceForm="ngForm">
            <div class="form-row">
              <!-- Select Source Field -->
              <div class="form-group">
                <label for="sourceType" class="form-label">Select Source</label>
                <select 
                  id="sourceType" 
                  name="sourceType" 
                  [(ngModel)]="newSource.sourceType"
                  class="form-select"
                  required>
                  <option value="" disabled>Select Traffic Source</option>
                  <option value="website">Website</option>
                  <option value="social">Social Media</option>
                  <option value="email">Email</option>
                  <option value="direct">Direct</option>
                  <option value="referral">Referral</option>
                </select>
              </div>

              <!-- Website URL Field -->
              <div class="form-group">
                <label for="websiteUrl" class="form-label">Website url (with http:// or https://)</label>
                <input 
                  type="url" 
                  id="websiteUrl" 
                  name="websiteUrl" 
                  [(ngModel)]="newSource.url"
                  class="form-input"
                  placeholder="https://example.com"
                  pattern="https?://.+"
                  required>
              </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="submit-btn" [disabled]="!addSourceForm.valid">
              Submit
            </button>
          </form>
        </div>
      </div>

      <!-- Traffic Sources Table -->
      <div class="table-container">
        <table class="traffic-sources-table">
          <thead>
            <tr>
              <th>SOURCE</th>
              <th>APPROVAL STATUS</th>
              <th>DATE</th>
              <th>ACTION</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let source of trafficSources">
              <td class="source-cell">{{ source.url }}</td>
              <td>
                <span class="status-badge" [class.approved]="source.status === 'approved'" [class.pending]="source.status === 'pending'">
                  <span class="status-icon" *ngIf="source.status === 'approved'">‚úì</span>
                  {{ source.status | titlecase }}
                </span>
              </td>
              <td>{{ source.date }}</td>
              <td>
                <button class="delete-btn" (click)="deleteSource(source.id)" title="Delete">
                  <span class="delete-icon">üóëÔ∏è</span>
                  Delete
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>
</div>
