<div class="dashboard-container" [class.sidebar-closed]="!isSidebarOpen" [class]="currentTheme + '-theme'">
  <!-- Shared Sidebar -->
  <app-sidebar [isOpen]="isSidebarOpen" (sidebarToggle)="toggleSidebar()"></app-sidebar>

  <!-- Mobile Sidebar Overlay -->
  <div class="sidebar-overlay" *ngIf="isSidebarOpen" (click)="closeSidebar()"></div>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Admin Header -->
    <header class="admin-header">
      <div class="header-left">
        <button class="sidebar-toggle-header-btn" *ngIf="!isSidebarOpen" (click)="toggleSidebar()" title="Open Sidebar">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </button>
      </div>
      
      <div class="header-right">
        <div class="theme-switcher-wrapper">
          <button class="header-icon theme-toggle" (click)="toggleThemeDropdown()">
            <span>{{ getThemeIcon() }}</span>
          </button>
          <div class="theme-dropdown" [class.active]="isThemeDropdownOpen">
            <button 
              class="theme-option" 
              [class.active]="currentTheme === 'light'"
              (click)="selectTheme('light')">
              <span class="theme-icon">‚òÄÔ∏è</span>
              <span class="theme-label">Light</span>
            </button>
            <button 
              class="theme-option" 
              [class.active]="currentTheme === 'dark'"
              (click)="selectTheme('dark')">
              <span class="theme-icon">üåô</span>
              <span class="theme-label">Dark</span>
            </button>
            <button 
              class="theme-option" 
              [class.active]="currentTheme === 'blue'"
              (click)="selectTheme('blue')">
              <span class="theme-icon">üåä</span>
              <span class="theme-label">Blue</span>
            </button>
          </div>
        </div>
        <button class="header-icon notifications">
          <span>üîî</span>
          <span class="notification-badge">3</span>
        </button>
        <button class="header-icon profile">
          <span>üë§</span>
        </button>
      </div>
    </header>

    <!-- User Links Content -->
    <section class="user-links">
      <!-- Breadcrumbs -->
      <nav class="breadcrumbs">
        <a routerLink="/admin/dashboard" class="breadcrumb-link">Home</a>
        <span class="breadcrumb-separator">></span>
        <a routerLink="/manage-user-admin/user-list" class="breadcrumb-link">User List</a>
        <span class="breadcrumb-separator">></span>
        <span class="breadcrumb-current">User Links - {{ userName }}</span>
      </nav>

      <!-- Page Title -->
      <h1 class="page-title">User Links - {{ userName }}</h1>

      <!-- Filters Section -->
      <div class="filters-section">
        <div class="search-box">
          <input
            type="text"
            placeholder="Search by short URL or original URL..."
            [(ngModel)]="searchTerm"
            (input)="onSearchChange()"
            class="form-input"
          />
        </div>

        <div class="filter-group">
          <select
            id="status-filter"
            [(ngModel)]="selectedStatus"
            (change)="onStatusChange()"
            class="form-select"
          >
            <option value="all">All Status</option>
            <option value="active">Active</option>
            <option value="inactive">Inactive</option>
          </select>
        </div>
      </div>

      <!-- Links Table -->
      <div class="table-container">
        <div *ngIf="isLoading" class="loading">
          <p>Loading links...</p>
        </div>

        <table *ngIf="!isLoading" class="links-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>SHORT URL</th>
              <th>ORIGINAL URL</th>
              <th>CLICKS</th>
              <th>STATUS</th>
              <th>CREATED AT</th>
              <th>LAST CLICKED</th>
              <th>ACTION</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let link of filteredLinks">
              <td>{{ link.id }}</td>
              <td class="short-url-cell">{{ link.shortUrl }}</td>
              <td class="original-url-cell" [title]="link.originalUrl">{{ link.originalUrl }}</td>
              <td>{{ link.clicks }}</td>
              <td>
                <span
                  class="status-badge"
                  [class.status-active]="link.status === 'active'"
                  [class.status-inactive]="link.status === 'inactive'"
                >
                  {{ link.status | titlecase }}
                </span>
              </td>
              <td>{{ link.createdAt }}</td>
              <td>{{ link.lastClicked || 'Never' }}</td>
              <td>
                <button
                  class="action-btn delete-btn"
                  (click)="deleteLink(link.id)"
                  title="Delete Link"
                >
                  <span class="delete-icon">üóëÔ∏è</span>
                  Delete
                </button>
              </td>
            </tr>
            <tr *ngIf="filteredLinks.length === 0">
              <td colspan="8" class="no-data">No links found</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>
</div>
