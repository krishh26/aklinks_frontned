<div class="dashboard-container" [class.sidebar-closed]="!isSidebarOpen">
  <!-- Shared Sidebar -->
  <app-sidebar [isOpen]="isSidebarOpen" (sidebarToggle)="toggleSidebar()"></app-sidebar>

  <!-- Mobile Sidebar Overlay -->
  <div class="sidebar-overlay" *ngIf="isSidebarOpen" (click)="closeSidebar()"></div>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Admin Header -->
    <app-admin-header [isSidebarOpen]="isSidebarOpen" (sidebarToggle)="toggleSidebar()"></app-admin-header>

    <!-- User Links Content -->
    <section class="user-links">
      <!-- Breadcrumbs -->
      <nav class="breadcrumbs">
        <a routerLink="/admin/dashboard" class="breadcrumb-link">Home</a>
        <span class="breadcrumb-separator">></span>
        <a routerLink="/manage-user-admin/user-list" class="breadcrumb-link">User List</a>
        <span class="breadcrumb-separator">></span>
        <span class="breadcrumb-current">User Links - {{ userName }}</span>
      </nav>

      <!-- Page Title -->
      <h1 class="page-title">User Links - {{ userName }}</h1>

      <!-- Filters Section -->
      <div class="filters-section">
        <div class="search-box">
          <input
            type="text"
            placeholder="Search by short URL or original URL..."
            [(ngModel)]="searchTerm"
            (input)="onSearchChange()"
            class="form-input"
          />
        </div>

        <div class="filter-group">
          <select
            id="status-filter"
            [(ngModel)]="selectedStatus"
            (change)="onStatusChange()"
            class="form-select"
          >
            <option value="all">All Status</option>
            <option value="active">Active</option>
            <option value="inactive">Inactive</option>
          </select>
        </div>
      </div>

      <!-- Links Table -->
      <div class="table-container">
        <div *ngIf="isLoading" class="loading">
          <p>Loading links...</p>
        </div>

        <table *ngIf="!isLoading" class="links-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>SHORT URL</th>
              <th>ORIGINAL URL</th>
              <th>CLICKS</th>
              <th>STATUS</th>
              <th>CREATED AT</th>
              <th>LAST CLICKED</th>
              <th>ACTION</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let link of filteredLinks">
              <td>{{ link.id }}</td>
              <td class="short-url-cell">{{ link.shortUrl }}</td>
              <td class="original-url-cell" [title]="link.originalUrl">{{ link.originalUrl }}</td>
              <td>{{ link.clicks }}</td>
              <td>
                <span
                  class="status-badge"
                  [class.status-active]="link.status === 'active'"
                  [class.status-inactive]="link.status === 'inactive'"
                >
                  {{ link.status | titlecase }}
                </span>
              </td>
              <td>{{ link.createdAt }}</td>
              <td>{{ link.lastClicked || 'Never' }}</td>
              <td>
                <div class="action-buttons">
                  <button
                    class="action-btn toggle-status-btn"
                    [class.status-active]="link.status === 'active'"
                    [class.status-inactive]="link.status === 'inactive'"
                    (click)="toggleLinkStatus(link)"
                    [title]="link.status === 'active' ? 'Deactivate Link' : 'Activate Link'"
                  >
                    <span class="status-icon">{{ link.status === 'active' ? '‚úÖ' : '‚ùå' }}</span>
                    {{ link.status === 'active' ? 'Deactivate' : 'Activate' }}
                  </button>
                  <button
                    class="action-btn delete-btn"
                    (click)="deleteLink(link)"
                    title="Delete Link"
                  >
                    <span class="delete-icon">üóëÔ∏è</span>
                    Delete
                  </button>
                </div>
              </td>
            </tr>
            <tr *ngIf="filteredLinks.length === 0">
              <td colspan="8" class="no-data">No links found</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>
</div>



